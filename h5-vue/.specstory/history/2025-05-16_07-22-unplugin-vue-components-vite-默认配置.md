<!-- Generated by SpecStory -->

# unplugin-vue-components/vite 默认配置 (2025-05-16 15:22:14)

_**User**_

'unplugin-vue-components/vite' 的配置默认值是什么

---

_**Assistant**_



---

Okay, I can help you with that. I'll search the web for the default configuration of `unplugin-vue-components/vite`.


---

<details>
            <summary>Searched web "unplugin-vue-components/vite default configuration" • **6** results</summary>
        
| Title | URL |
|-------|-----|
| On-demand components auto importing for Vue | https://github.com/unplugin/unplugin-vue-components |
| unplugin-vue-components | https://www.npmjs.com/package/unplugin-vue-components/v/0.14.0-beta.1 |
| Unplugin Vue Components | https://ui.vuestic.dev/extensions/unplugin-vue-components/ |
| GitHub - antfu/unplugin-vue-components: 📲 On-demand components auto importing for Vue | https://github.com/antfu/unplugin-vue-components |
| GitHub - unplugin/unplugin-vue-components: 📲 On-demand components auto importing for Vue | https://github.com/unplugin/unplugin-vue-components |
| unplugin-vue-components | https://www.npmjs.com/package/unplugin-vue-components |

</details>

---

Based on the information from the GitHub repository (https://github.com/unplugin/unplugin-vue-components), here are the default configuration values for `unplugin-vue-components/vite`:

```javascript
Components({
  // relative paths to the directory to search for components.
  dirs: ['src/components'],

  // valid file extensions for components.
  extensions: ['vue'],

  // Glob patterns to match file names to be detected as components.
  // When specified, the `dirs`, `extensions`, and `directoryAsNamespace` options will be ignored.
  // If you want to exclude components being registered, use negative globs with leading `!`.
  globs: ['src/components/*.{vue}'],

  // search for subdirectories
  deep: true,

  // resolvers for custom components
  resolvers: [],

  // generate `components.d.ts` global declarations,
  // also accepts a path for custom filename
  // default: `true` if package typescript is installed
  dts: false, // Note: This defaults to true if 'typescript' is installed in the project.

  // Allow subdirectories as namespace prefix for components.
  directoryAsNamespace: false,

  // Collapse same prefixes (camel-sensitive) of folders and components
  // to prevent duplication inside namespaced component name.
  // works when `directoryAsNamespace: true`
  collapseSamePrefixes: false,

  // Subdirectory paths for ignoring namespace prefixes.
  // works when `directoryAsNamespace: true`
  globalNamespaces: [],

  // auto import for directives
  // default: `true` for Vue 3, `false` for Vue 2
  // Babel is needed to do the transformation for Vue 2, it's disabled by default for performance concerns.
  // To install Babel, run: `npm install -D @babel/parser`
  directives: true, // This is true for Vue 3 by default.

  // Transform path before resolving
  importPathTransform: v => v,

  // Allow for components to override other components with the same name
  allowOverrides: false,

  // Filters for transforming targets (components to insert the auto import)
  // Note these are NOT about including/excluding components registered - use `globs` or `excludeNames` for that
  include: [/\.vue$/, /\.vue\?vue/, /\.vue\.[tj]sx?\?vue/],
  exclude: [/[\\/]node_modules[\\/]/, /[\\/]\.git[\\/]/, /[\\/]\.nuxt[\\/]/],

  // Filters for component names that will not be imported
  // Use for globally imported async components or other conflicts that the plugin cannot detect
  excludeNames: [/^Async.+/],

  // Vue version of project. It will detect automatically if not specified.
  // Acceptable value: 2 | 2.7 | 3
  version: 2.7, // This will be auto-detected. The example shows 2.7, but it will adapt to your project's Vue version.

  // Only provide types of components in library (registered globally)
  types: []
})
```

In your `vite.config.ts` file, you are currently overriding the `resolvers` option. All other options will use their default values as listed above.
For example, by default, it looks for components in `src/components`. If your components are in a different directory, you would need to configure the `dirs` option.
Also, `dts` is `false` by default, but if you have TypeScript installed (which is likely in a Vite project), it will default to `true` and generate a `components.d.ts` file. Your current configuration doesn't explicitly set `dts`, so its behavior will depend on whether `typescript` is a project dependency.

---

_**User**_

很好，把这些默认配置翻译成中文

---

_**Assistant**_



---

好的，这是 `unplugin-vue-components/vite` 默认配置的中文说明：

```javascript
Components({
  // 用于搜索组件的目录的相对路径。
  dirs: ['src/components'],

  // 组件的有效文件扩展名。
  extensions: ['vue'],

  // 用于匹配被检测为组件的文件名的 Glob 模式。
  // 指定此选项后，`dirs`、`extensions` 和 `directoryAsNamespace` 选项将被忽略。
  // 如果要排除某些组件被注册，请使用带前导 `!` 的否定 Glob 模式。
  globs: ['src/components/*.{vue}'],

  // 是否搜索子目录。
  deep: true,

  // 自定义组件的解析器。
  resolvers: [],

  // 是否生成 `components.d.ts` 全局声明文件，
  // 也接受一个自定义文件名的路径。
  // 默认：如果项目中安装了 typescript，则为 `true`。
  dts: false, // 注意：如果项目中安装了 'typescript'，此项默认为 true。

  // 是否允许子目录作为组件的命名空间前缀。
  directoryAsNamespace: false,

  // 是否折叠文件夹和组件的相同前缀（驼峰敏感），
  // 以防止命名空间组件名称中的重复。
  // 当 `directoryAsNamespace: true` 时生效。
  collapseSamePrefixes: false,

  // 用于忽略命名空间前缀的子目录路径。
  // 当 `directoryAsNamespace: true` 时生效。
  globalNamespaces: [],

  // 是否自动导入指令。
  // 默认：Vue 3 为 `true`，Vue 2 为 `false`。
  // Vue 2 需要 Babel 进行转换，出于性能考虑默认禁用。
  // 要安装 Babel，请运行：`npm install -D @babel/parser`。
  directives: true, // Vue 3 默认为 true。

  // 解析前转换路径。
  importPathTransform: v => v,

  // 是否允许同名组件覆盖其他组件。
  allowOverrides: false,

  // 用于转换目标（插入自动导入的组件）的过滤器。
  // 注意：这些与包含/排除已注册的组件无关 - 为此请使用 `globs` 或 `excludeNames`。
  include: [/\.vue$/, /\.vue\?vue/, /\.vue\.[tj]sx?\?vue/],
  exclude: [/[\\/]node_modules[\\/]/, /[\\/]\.git[\\/]/, /[\\/]\.nuxt[\\/]/],

  // 不会被导入的组件名称的过滤器。
  // 用于全局导入的异步组件或插件无法检测到的其他冲突。
  excludeNames: [/^Async.+/],

  // 项目的 Vue 版本。如果未指定，将自动检测。
  // 可接受的值：2 | 2.7 | 3。
  version: 2.7, // 此项会自动检测。示例显示的是 2.7，但它会适应您项目的 Vue 版本。

  // 仅提供库中（全局注册）组件的类型。
  types: []
})
```

---

_**User**_

解释一下“directives”设为true后的效果

---

_**Assistant**_



---

当 `unplugin-vue-components` 配置中的 `directives` 选项设置为 `true` 时，它会启用指令的自动导入功能。

具体来说，这意味着：

1.  **自动导入指令 (Automatic Directive Importing)**: 就像它自动导入你在模板中使用的组件一样，该插件也会扫描你的模板，查找使用的指令（例如自定义指令）。如果找到了，它会自动导入这些指令，你无需在 `<script setup>` 或组件的 `directives` 选项中手动导入和注册它们。

2.  **支持 Vue 3 和 Vue 2 (Vue 3 and Vue 2 Support)**:
    *   对于 **Vue 3**，此功能通常开箱即用，并且 `directives: true` 是默认行为。
    *   对于 **Vue 2**，自动导入指令需要 Babel 进行代码转换。因此，在 Vue 2 项目中，`directives` 默认是 `false` 以避免不必要的性能开销。如果你在 Vue 2 项目中将其设置为 `true`，你需要确保项目中已安装并配置了 Babel (`@babel/parser`)。

3.  **简化开发 (Simplified Development)**: 主要的好处是简化了开发流程。你不必再为每个用到的自定义指令都写一行 `import` 语句并注册它，插件会帮你处理。这能让你的组件代码更简洁。

**示例场景：**

假设你有一个自定义指令叫做 `v-focus`，用于在元素挂载时自动聚焦。

**不使用 `directives: true` (或设为 `false`) 时，你可能需要这样做：**

```vue
<template>
  <input v-focus />
</template>

<script setup>
import { vFocus } from './directives/focus'; // 手动导入
// 或者在选项式 API 中
// directives: {
//   focus: vFocus
// }
</script>
```

**当 `directives: true` 时，你可以这样做：**

```vue
<template>
  <input v-focus />
</template>

<script setup>
// 无需手动导入 v-focus，插件会自动处理
// (假设 v-focus 指令文件位于插件扫描的目录内，或者有相应的 resolver)
</script>
```

总而言之，`directives: true` 使得在项目中使用指令（特别是自定义指令）更加方便，减少了模板代码，并让组件的 `script` 部分更加干净。

---

_**User**_

很好，@vite.config.ts 现在我使用components的插件只是为了使用NutUIResolver，这个插件的其他功能都不需要，如auto directives和默认的include src/components，请修改配置。并且检查该插件是否还有其他功能被默认开启

---

_**Assistant**_



---

